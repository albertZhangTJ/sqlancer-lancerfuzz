grammar test;

test 
    : createTable | t[2]
    ;

createTable
    : ' CREATE ' error['A BLOB field is not allowed in partition function', 'is of a not allowed type for this type of partitioning'] 
      ( 90% ' '  | ' TEMPORARY ' error['Cannot create temporary table with partitions'] ) TABLE 
        ' IF NOT EXISTS '? new['table']
        (
            '(' ( cn+=new['column'] ( 80% ' INT ' | ' FLOAT ' | ' TEXT '))**random[1, 5, ',', 10] ')'
            ( 80% ' '  |
                    ' ENGINE = ' (' MyISAM ' | ' InnoDB ' ) |
                    ' PARTITION BY ' error['allowed type']
                    ( 
                        'HASH(' cn.any ')' |
                        ' KEY ' ( 'ALGORITHM=' ('1'|'2'))? '(' cn.any ')'
                    )
            )
        )  ';'
    ;

t [c] returns [d]
    : 'A' d=c+1
    ;

TABLE : ' TABLE ';
LIKE : ' LIKE ';