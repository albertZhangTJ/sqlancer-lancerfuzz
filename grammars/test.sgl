grammar test;

test 
    : createTable @0 c=$2 @2 t[c] @1 c
    ;

createTable
    : 'CREATE' error['A BLOB field is not allowed in partition function', 'is of a not allowed type for this type of partitioning'] 
      ( 90% ' '  | 'TEMPORARY' error['Cannot create temporary table with partitions'] ) TABLE 
        'ifNotExists'? new['table']
        (
            '(' ( cn+=new['column'] 'columnDefinition')**random[1, 5, ',', 10] ')'
            ( 80% ' '  |
                    ' ENGINE = ' (' MyISAM ' | ' InnoDB ' ) |
                    ' PARTITION BY ' error['allowed type']
                    ( 
                        'HASH(' cn.any ')' |
                        ' KEY ' ( 'ALGORITHM=' ('1'|'2'))? '(' cn.any ')'
                    )
            )
        )  ';'
    ;

t [c] returns [d]
    : 'A' d=c+1
    ;

TABLE : ' TABLE ';
LIKE : ' LIKE ';